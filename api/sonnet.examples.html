
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sonnet.examples package &#8212; sonnet git documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sonnet-examples-package">
<h1>sonnet.examples package<a class="headerlink" href="#sonnet-examples-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-sonnet.examples.brnn_ptb">
<span id="sonnet-examples-brnn-ptb-module"></span><h2>sonnet.examples.brnn_ptb module<a class="headerlink" href="#module-sonnet.examples.brnn_ptb" title="Permalink to this headline">¶</a></h2>
<p>Open Source implementation of Bayesian RNN on Penn Treebank.</p>
<p>Please see <a class="reference external" href="https://arxiv.org/pdf/1704.02798.pdf">https://arxiv.org/pdf/1704.02798.pdf</a>, section 7.1.</p>
<p>Download the Penn Treebank (PTB) dataset from:
<a class="reference external" href="http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz">http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz</a></p>
<p>Usage: python ./brnn_ptb.py –data_path=</p>
<p>Above, is the path to the ‘data’ subdirectory within the directory
resulting from unpacking the .tgz file whose link is given above.</p>
<dl class="class">
<dt id="sonnet.examples.brnn_ptb.CustomScaleMixture">
<em class="property">class </em><code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">CustomScaleMixture</code><span class="sig-paren">(</span><em>pi</em>, <em>sigma1</em>, <em>sigma2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#CustomScaleMixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.CustomScaleMixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="sonnet.examples.brnn_ptb.CustomScaleMixture.log_prob">
<code class="descname">log_prob</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#CustomScaleMixture.log_prob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.CustomScaleMixture.log_prob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="sonnet.examples.brnn_ptb.DataOps">
<em class="property">class </em><code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">DataOps</code><span class="sig-paren">(</span><em>sparse_obs</em>, <em>sparse_target</em><span class="sig-paren">)</span><a class="headerlink" href="#sonnet.examples.brnn_ptb.DataOps" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="attribute">
<dt id="sonnet.examples.brnn_ptb.DataOps.sparse_obs">
<code class="descname">sparse_obs</code><a class="headerlink" href="#sonnet.examples.brnn_ptb.DataOps.sparse_obs" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.brnn_ptb.DataOps.sparse_target">
<code class="descname">sparse_target</code><a class="headerlink" href="#sonnet.examples.brnn_ptb.DataOps.sparse_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer">
<em class="property">class </em><code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">GlobalNormClippingOptimizer</code><span class="sig-paren">(</span><em>opt</em>, <em>clip_norm</em>, <em>use_locking=False</em>, <em>name='GlobalNormClippingOptimizer'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#GlobalNormClippingOptimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.optimizer.Optimizer</span></code></p>
<p>Optimizer that clips gradients by global norm.</p>
<dl class="method">
<dt id="sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer.apply_gradients">
<code class="descname">apply_gradients</code><span class="sig-paren">(</span><em>grads_and_vars</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#GlobalNormClippingOptimizer.apply_gradients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer.apply_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply gradients to variables.</p>
<p>This is the second part of <code class="docutils literal notranslate"><span class="pre">minimize()</span></code>. It returns an <code class="docutils literal notranslate"><span class="pre">Operation</span></code>
that applies gradients.</p>
<p>Args: grads_and_vars: List of (gradient, variable) pairs as returned
by <code class="docutils literal notranslate"><span class="pre">compute_gradients()</span></code>. global_step: Optional <code class="docutils literal notranslate"><span class="pre">Variable</span></code> to
increment by one after the variables have been updated. name: Optional
name for the returned operation. Default to the name passed to the
<code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> constructor.</p>
<p>Returns: An <code class="docutils literal notranslate"><span class="pre">Operation</span></code> that applies the specified gradients. If
<code class="docutils literal notranslate"><span class="pre">global_step</span></code> was not None, that operation also increments
<code class="docutils literal notranslate"><span class="pre">global_step</span></code>.</p>
<p>Raises: TypeError: If <code class="docutils literal notranslate"><span class="pre">grads_and_vars</span></code> is malformed. ValueError: If
none of the variables have gradients.</p>
</dd></dl>

<dl class="method">
<dt id="sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer.compute_gradients">
<code class="descname">compute_gradients</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#GlobalNormClippingOptimizer.compute_gradients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.GlobalNormClippingOptimizer.compute_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute gradients of <code class="docutils literal notranslate"><span class="pre">loss</span></code> for the variables in <code class="docutils literal notranslate"><span class="pre">var_list</span></code>.</p>
<p>This is the first part of <code class="docutils literal notranslate"><span class="pre">minimize()</span></code>. It returns a list of
(gradient, variable) pairs where “gradient” is the gradient for
“variable”. Note that “gradient” can be a <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, an
<code class="docutils literal notranslate"><span class="pre">IndexedSlices</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no gradient for the given
variable.</p>
<p>Args: loss: A Tensor containing the value to minimize or a callable
taking no arguments which returns the value to minimize. When eager
execution is enabled it must be a callable. var_list: Optional list or
tuple of <code class="docutils literal notranslate"><span class="pre">tf.Variable</span></code> to update to minimize <code class="docutils literal notranslate"><span class="pre">loss</span></code>. Defaults to the
list of variables collected in the graph under the key
<code class="docutils literal notranslate"><span class="pre">GraphKeys.TRAINABLE_VARIABLES</span></code>. gate_gradients: How to gate the
computation of gradients. Can be <code class="docutils literal notranslate"><span class="pre">GATE_NONE</span></code>, <code class="docutils literal notranslate"><span class="pre">GATE_OP</span></code>, or
<code class="docutils literal notranslate"><span class="pre">GATE_GRAPH</span></code>. aggregation_method: Specifies the method used to
combine gradient terms. Valid values are defined in the class
<code class="docutils literal notranslate"><span class="pre">AggregationMethod</span></code>. colocate_gradients_with_ops: If True, try
colocating gradients with the corresponding op. grad_loss: Optional. A
<code class="docutils literal notranslate"><span class="pre">Tensor</span></code> holding the gradient computed for <code class="docutils literal notranslate"><span class="pre">loss</span></code>.</p>
<p>Returns: A list of (gradient, variable) pairs. Variable is always
present, but gradient can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Raises: TypeError: If <code class="docutils literal notranslate"><span class="pre">var_list</span></code> contains anything else than
<code class="docutils literal notranslate"><span class="pre">Variable</span></code> objects. ValueError: If some arguments are invalid.
RuntimeError: If called with eager execution enabled and <code class="docutils literal notranslate"><span class="pre">loss</span></code> is not
callable.</p>
<p>&#64;compatibility(eager) When eager execution is enabled,
<code class="docutils literal notranslate"><span class="pre">gate_gradients</span></code>, <code class="docutils literal notranslate"><span class="pre">aggregation_method</span></code>, and
<code class="docutils literal notranslate"><span class="pre">colocate_gradients_with_ops</span></code> are ignored. &#64;end_compatibility</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sonnet.examples.brnn_ptb.PTB">
<em class="property">class </em><code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">PTB</code><span class="sig-paren">(</span><em>subset</em>, <em>seq_len</em>, <em>batch_size</em>, <em>name='PTB'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#PTB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.PTB" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps the PTB reader of the TensorFlow tutorial.</p>
<dl class="attribute">
<dt id="sonnet.examples.brnn_ptb.PTB.num_batches">
<code class="descname">num_batches</code><a class="headerlink" href="#sonnet.examples.brnn_ptb.PTB.num_batches" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sonnet.examples.brnn_ptb.PTB.to_string">
<code class="descname">to_string</code><span class="sig-paren">(</span><em>idx_seq</em>, <em>join_token=' '</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#PTB.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.PTB.to_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sonnet.examples.brnn_ptb.PTB.to_string_tensor">
<code class="descname">to_string_tensor</code><span class="sig-paren">(</span><em>time_major_idx_seq_batch</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#PTB.to_string_tensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.PTB.to_string_tensor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.brnn_ptb.PTB.vocab_size">
<code class="descname">vocab_size</code><a class="headerlink" href="#sonnet.examples.brnn_ptb.PTB.vocab_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.build_logits">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">build_logits</code><span class="sig-paren">(</span><em>data_ops</em>, <em>embed_layer</em>, <em>rnn_core</em>, <em>output_linear</em>, <em>name_prefix</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#build_logits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.build_logits" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the core model logic.</p>
<p>Unrolls a Bayesian RNN over the given sequence.</p>
<p>Args: data_ops: A <code class="docutils literal notranslate"><span class="pre">sequence_data.SequenceDataOps</span></code> namedtuple.
embed_layer: A <code class="docutils literal notranslate"><span class="pre">snt.Embed</span></code> instance. rnn_core: A <code class="docutils literal notranslate"><span class="pre">snt.RNNCore</span></code>
instance. output_linear: A <code class="docutils literal notranslate"><span class="pre">snt.Linear</span></code> instance. name_prefix: A
string to use to prefix local variable names.</p>
<p>Returns: A 3D time-major tensor representing the model’s logits for a
sequence of predictions. Shape <code class="docutils literal notranslate"><span class="pre">[time_steps,</span> <span class="pre">batch_size,</span> <span class="pre">vocab_size]</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.build_loss">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">build_loss</code><span class="sig-paren">(</span><em>model_logits</em>, <em>sparse_targets</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#build_loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.build_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the log loss given predictions and targets.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.build_modules">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">build_modules</code><span class="sig-paren">(</span><em>is_training</em>, <em>vocab_size</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#build_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.build_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the modules used in the graph.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.custom_scale_mixture_prior_builder">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">custom_scale_mixture_prior_builder</code><span class="sig-paren">(</span><em>getter</em>, <em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#custom_scale_mixture_prior_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.custom_scale_mixture_prior_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A builder for the gaussian scale-mixture prior of Fortunato et al.</p>
<p>Please see <a class="reference external" href="https://arxiv.org/abs/1704.02798">https://arxiv.org/abs/1704.02798</a>, section 7.1</p>
<p>Args: getter: The <code class="docutils literal notranslate"><span class="pre">getter</span></code> passed to a <code class="docutils literal notranslate"><span class="pre">custom_getter</span></code>. Please see
the documentation for <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. name: The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument
passed to <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. *args: Positional arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. **kwargs: Keyword arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>.</p>
<p>Returns: An instance of <code class="docutils literal notranslate"><span class="pre">tf.contrib.distributions.Distribution</span></code>
representing the prior distribution over the variable in question.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.lstm_posterior_builder">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">lstm_posterior_builder</code><span class="sig-paren">(</span><em>getter</em>, <em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#lstm_posterior_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.lstm_posterior_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A builder for a particular diagonal gaussian posterior.</p>
<p>Args: getter: The <code class="docutils literal notranslate"><span class="pre">getter</span></code> passed to a <code class="docutils literal notranslate"><span class="pre">custom_getter</span></code>. Please see
the documentation for <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. name: The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument
passed to <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. *args: Positional arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. **kwargs: Keyword arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>.</p>
<p>Returns: An instance of <code class="docutils literal notranslate"><span class="pre">tf.contrib.distributions.Distribution</span></code>
representing the posterior distribution over the variable in question.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.main">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">main</code><span class="sig-paren">(</span><em>unused_argv</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.non_lstm_posterior_builder">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">non_lstm_posterior_builder</code><span class="sig-paren">(</span><em>getter</em>, <em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#non_lstm_posterior_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.non_lstm_posterior_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A builder for a particular diagonal gaussian posterior.</p>
<p>Args: getter: The <code class="docutils literal notranslate"><span class="pre">getter</span></code> passed to a <code class="docutils literal notranslate"><span class="pre">custom_getter</span></code>. Please see
the documentation for <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. name: The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument
passed to <code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. *args: Positional arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>. **kwargs: Keyword arguments forwarded by
<code class="docutils literal notranslate"><span class="pre">tf.get_variable</span></code>.</p>
<p>Returns: An instance of <code class="docutils literal notranslate"><span class="pre">tf.contrib.distributions.Distribution</span></code>
representing the posterior distribution over the variable in question.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.test">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">test</code><span class="sig-paren">(</span><em>logdir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a network on the PTB test set, restoring from the latest checkpoint.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.brnn_ptb.train">
<code class="descclassname">sonnet.examples.brnn_ptb.</code><code class="descname">train</code><span class="sig-paren">(</span><em>logdir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/brnn_ptb.html#train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.brnn_ptb.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a network on the PTB training set, checkpointing the weights.</p>
</dd></dl>

</div>
<div class="section" id="module-sonnet.examples.dataset_shakespeare">
<span id="sonnet-examples-dataset-shakespeare-module"></span><h2>sonnet.examples.dataset_shakespeare module<a class="headerlink" href="#module-sonnet.examples.dataset_shakespeare" title="Permalink to this headline">¶</a></h2>
<p>Classes to load textual data from Shakespeare’s plays.</p>
<dl class="class">
<dt id="sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask">
<em class="property">class </em><code class="descclassname">sonnet.examples.dataset_shakespeare.</code><code class="descname">SequenceDataOpsNoMask</code><span class="sig-paren">(</span><em>obs</em>, <em>target</em><span class="sig-paren">)</span><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask.obs">
<code class="descname">obs</code><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask.obs" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask.target">
<code class="descname">target</code><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.SequenceDataOpsNoMask.target" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset">
<em class="property">class </em><code class="descclassname">sonnet.examples.dataset_shakespeare.</code><code class="descname">TinyShakespeareDataset</code><span class="sig-paren">(</span><em>num_steps=1</em>, <em>batch_size=1</em>, <em>subset='train'</em>, <em>random=False</em>, <em>dtype=tf.float32</em>, <em>name='tiny_shakespeare_dataset'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TinyShakespeareDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sonnet.python.modules.html#sonnet.python.modules.base.AbstractModule" title="sonnet.python.modules.base.AbstractModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">sonnet.python.modules.base.AbstractModule</span></code></a></p>
<p>Tiny Shakespeare sequence data.</p>
<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.TEST">
<code class="descname">TEST</code><em class="property"> = 'test'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.TEST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.TRAIN">
<code class="descname">TRAIN</code><em class="property"> = 'train'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.TRAIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.VALID">
<code class="descname">VALID</code><em class="property"> = 'valid'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.VALID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.cost">
<code class="descname">cost</code><span class="sig-paren">(</span><em>logits</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TinyShakespeareDataset.cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cost.</p>
<p>Args: logits: model output. target: target.</p>
<p>Returns: Cross-entropy loss for a sequence of logits. The loss will be
averaged across time steps if time_average_cost was enabled at
construction time.</p>
</dd></dl>

<dl class="method">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.to_human_readable">
<code class="descname">to_human_readable</code><span class="sig-paren">(</span><em>data</em>, <em>label_batch_entries=True</em>, <em>indices=None</em>, <em>sep='\n'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TinyShakespeareDataset.to_human_readable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.to_human_readable" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a human-readable version of a one-hot encoding of words.</p>
<p>Args: data: A tuple with (obs, target). <code class="docutils literal notranslate"><span class="pre">obs</span></code> is a numpy array with
one-hot encoding of words. label_batch_entries: bool. Whether to add
numerical label before each batch element in the output string. indices:
List of int or None. Used to select a subset of minibatch indices to
print. None will print the whole minibatch. sep: A char separator which
separates the output for each batch. Defaults to the newline character.</p>
<p>Returns: String with the words from <code class="docutils literal notranslate"><span class="pre">data[0]</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.vocab_size">
<code class="descname">vocab_size</code><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TinyShakespeareDataset.vocab_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource">
<em class="property">class </em><code class="descclassname">sonnet.examples.dataset_shakespeare.</code><code class="descname">TokenDataSource</code><span class="sig-paren">(</span><em>data_file</em>, <em>vocab_data_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TokenDataSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulates loading/tokenization logic for disk-based data.</p>
<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.CHAR_EOS">
<code class="descname">CHAR_EOS</code><em class="property"> = '|'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.CHAR_EOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.DEFAULT_START_TOKENS">
<code class="descname">DEFAULT_START_TOKENS</code><em class="property"> = ['_unk_', '_null_', '_eos_', '|']</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.DEFAULT_START_TOKENS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.NULL">
<code class="descname">NULL</code><em class="property"> = '_null_'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.NULL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.UNK">
<code class="descname">UNK</code><em class="property"> = '_unk_'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.UNK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.WORD_EOS">
<code class="descname">WORD_EOS</code><em class="property"> = '_eos_'</em><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.WORD_EOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>token_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TokenDataSource.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a human-readable representation of the token list.</p>
</dd></dl>

<dl class="method">
<dt id="sonnet.examples.dataset_shakespeare.TokenDataSource.tokenize">
<code class="descname">tokenize</code><span class="sig-paren">(</span><em>token_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/dataset_shakespeare.html#TokenDataSource.tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.dataset_shakespeare.TokenDataSource.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces the list of integer indices corresponding to a token list.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sonnet.examples.module_with_build_args">
<span id="sonnet-examples-module-with-build-args-module"></span><h2>sonnet.examples.module_with_build_args module<a class="headerlink" href="#module-sonnet.examples.module_with_build_args" title="Permalink to this headline">¶</a></h2>
<p>Example script using <code class="docutils literal notranslate"><span class="pre">snt.Module</span></code> to make a module with build method
args.</p>
<p><code class="docutils literal notranslate"><span class="pre">snt.Sequential</span></code> has been deliberately designed for simple use cases.
In particular, it assumes that the only arguments passed when called are
inputs to the first layer. As such, one cannot easily control behaviour
of submodules that do accept different arguments in their call method,
such as <code class="docutils literal notranslate"><span class="pre">snt.BatchNorm</span></code> and the <code class="docutils literal notranslate"><span class="pre">is_training</span></code> flag. One may,
however, quite easily replicate the same functionality using
<code class="docutils literal notranslate"><span class="pre">snt.Module</span></code> to construct a module from a custom method, as shown in
this script.</p>
<p>To run this script (on CPU), use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bazel</span> <span class="n">run</span> <span class="o">-</span><span class="n">c</span> <span class="n">opt</span> <span class="n">module_with_build_args</span>
</pre></div>
</div>
<dl class="function">
<dt id="sonnet.examples.module_with_build_args.custom_build">
<code class="descclassname">sonnet.examples.module_with_build_args.</code><code class="descname">custom_build</code><span class="sig-paren">(</span><em>inputs</em>, <em>is_training</em>, <em>keep_prob</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/module_with_build_args.html#custom_build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.module_with_build_args.custom_build" title="Permalink to this definition">¶</a></dt>
<dd><p>A custom build method to wrap into a sonnet Module.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.module_with_build_args.main">
<code class="descclassname">sonnet.examples.module_with_build_args.</code><code class="descname">main</code><span class="sig-paren">(</span><em>unused_argv</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/module_with_build_args.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.module_with_build_args.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-sonnet.examples.ptb_reader">
<span id="sonnet-examples-ptb-reader-module"></span><h2>sonnet.examples.ptb_reader module<a class="headerlink" href="#module-sonnet.examples.ptb_reader" title="Permalink to this headline">¶</a></h2>
<p>A fork of the Penn Treebank reader from TensorFlow’s RNN tutorial.</p>
<dl class="function">
<dt id="sonnet.examples.ptb_reader.ptb_producer">
<code class="descclassname">sonnet.examples.ptb_reader.</code><code class="descname">ptb_producer</code><span class="sig-paren">(</span><em>raw_data</em>, <em>batch_size</em>, <em>num_steps</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/ptb_reader.html#ptb_producer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.ptb_reader.ptb_producer" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate on the raw PTB data.</p>
<p>This chunks up raw_data into batches of examples and returns Tensors
that are drawn from these batches.</p>
<p>Args: raw_data: one of the raw data outputs from ptb_raw_data.
batch_size: int, the batch size. num_steps: int, the number of
unrolls. name: the name of this operation (optional).</p>
<p>Returns: A pair of Tensors, each shaped [batch_size, num_steps]. The
second element of the tuple is the same data time-shifted to the right
by one.</p>
<p>Raises: tf.errors.InvalidArgumentError: if batch_size or num_steps are
too high.</p>
</dd></dl>

<dl class="function">
<dt id="sonnet.examples.ptb_reader.ptb_raw_data">
<code class="descclassname">sonnet.examples.ptb_reader.</code><code class="descname">ptb_raw_data</code><span class="sig-paren">(</span><em>data_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sonnet/examples/ptb_reader.html#ptb_raw_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sonnet.examples.ptb_reader.ptb_raw_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Load PTB raw data from data directory “data_path”.</p>
<p>Reads PTB text files, converts strings to integer ids, and performs
mini-batching of the inputs.</p>
<p>The PTB dataset comes from Tomas Mikolov’s webpage:</p>
<p><a class="reference external" href="http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz">http://www.fit.vutbr.cz/~imikolov/rnnlm/simple-examples.tgz</a></p>
<p>Args: data_path: string path to the directory where simple-examples.tgz
has been extracted.</p>
<p>Returns: tuple (train_data, valid_data, test_data, vocabulary) where
each of the data objects can be passed to PTBIterator.</p>
</dd></dl>

</div>
<div class="section" id="sonnet-examples-rnn-shakespeare-module">
<h2>sonnet.examples.rnn_shakespeare module<a class="headerlink" href="#sonnet-examples-rnn-shakespeare-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="sonnet-examples-rnn-shakespeare-test-module">
<h2>sonnet.examples.rnn_shakespeare_test module<a class="headerlink" href="#sonnet-examples-rnn-shakespeare-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-sonnet.examples">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-sonnet.examples" title="Permalink to this headline">¶</a></h2>
<p>Examples.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">sonnet.examples package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-sonnet.examples.brnn_ptb">sonnet.examples.brnn_ptb module</a></li>
<li><a class="reference internal" href="#module-sonnet.examples.dataset_shakespeare">sonnet.examples.dataset_shakespeare module</a></li>
<li><a class="reference internal" href="#module-sonnet.examples.module_with_build_args">sonnet.examples.module_with_build_args module</a></li>
<li><a class="reference internal" href="#module-sonnet.examples.ptb_reader">sonnet.examples.ptb_reader module</a></li>
<li><a class="reference internal" href="#sonnet-examples-rnn-shakespeare-module">sonnet.examples.rnn_shakespeare module</a></li>
<li><a class="reference internal" href="#sonnet-examples-rnn-shakespeare-test-module">sonnet.examples.rnn_shakespeare_test module</a></li>
<li><a class="reference internal" href="#module-sonnet.examples">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/sonnet.examples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Sonnet Authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/api/sonnet.examples.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>